{% extends "base.html" %}

{% block title %}Challenges - AI Finance App{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12 mb-4">
        <div class="card">
            <div class="card-header">
                <h4>Challenges</h4>
            </div>
            <div class="card-body">
                <ul class="nav nav-tabs mb-3" id="challengeTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="saving-tab" data-bs-toggle="tab" data-bs-target="#saving" type="button" role="tab">Saving</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="spending-tab" data-bs-toggle="tab" data-bs-target="#spending" type="button" role="tab">Spending</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="earning-tab" data-bs-toggle="tab" data-bs-target="#earning" type="button" role="tab">Earning</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="investing-tab" data-bs-toggle="tab" data-bs-target="#investing" type="button" role="tab">Investing</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="budgeting-tab" data-bs-toggle="tab" data-bs-target="#budgeting" type="button" role="tab">Budgeting</button>
                    </li>
                </ul>
                
                <div class="tab-content" id="challengeTabsContent">
                    <!-- Saving Challenges -->
                    <div class="tab-pane fade show active" id="saving" role="tabpanel">
                        <div class="row">
                            {% for challenge in challenges if challenge.challenge_type.value == 'Saving' %}
                            <div class="col-md-4 mb-3">
                                <div class="card h-100 {% if challenge.is_completed %}border-success{% endif %}">
                                    <div class="card-body">
                                        <h5 class="card-title">{{ challenge.title }}</h5>
                                        <p class="card-text">{{ challenge.description }}</p>
                                        <div class="mb-2">
                                            <div class="progress">
                                                <div class="progress-bar" role="progressbar" style="width: {{ challenge.progress }}%">
                                                    {{ challenge.progress|round|int }}%
                                                </div>
                                            </div>
                                        </div>
                                        <div class="d-flex justify-content-between align-items-center">
                                            <span class="badge bg-{{ 'success' if challenge.difficulty == 'Easy' else 'warning' if challenge.difficulty == 'Medium' else 'danger' }}">
                                                {{ challenge.difficulty }}
                                            </span>
                                            <div>
                                                <span class="badge bg-warning text-dark">{{ challenge.reward_coins }} coins</span>
                                                <span class="badge bg-info">{{ challenge.reward_exp }} XP</span>
                                            </div>
                                        </div>
                                        {% if challenge.is_completed %}
                                        <div class="mt-2">
                                            <span class="badge bg-success">Completed!</span>
                                        </div>
                                        {% else %}
                                        <div class="mt-2">
                                            <button class="btn btn-sm btn-outline-primary">Start Challenge</button>
                                        </div>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            {% else %}
                            <div class="col-12">
                                <p class="text-center">No saving challenges available at the moment.</p>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    
                    <!-- Spending Challenges -->
                    <div class="tab-pane fade" id="spending" role="tabpanel">
                        <div class="row">
                            {% for challenge in challenges if challenge.challenge_type.value == 'Spending' %}
                            <div class="col-md-4 mb-3">
                                <div class="card h-100 {% if challenge.is_completed %}border-success{% endif %}">
                                    <div class="card-body">
                                        <h5 class="card-title">{{ challenge.title }}</h5>
                                        <p class="card-text">{{ challenge.description }}</p>
                                        <div class="mb-2">
                                            <div class="progress">
                                                <div class="progress-bar" role="progressbar" style="width: {{ challenge.progress }}%">
                                                    {{ challenge.progress|round|int }}%
                                                </div>
                                            </div>
                                        </div>
                                        <div class="d-flex justify-content-between align-items-center">
                                            <span class="badge bg-{{ 'success' if challenge.difficulty == 'Easy' else 'warning' if challenge.difficulty == 'Medium' else 'danger' }}">
                                                {{ challenge.difficulty }}
                                            </span>
                                            <div>
                                                <span class="badge bg-warning text-dark">{{ challenge.reward_coins }} coins</span>
                                                <span class="badge bg-info">{{ challenge.reward_exp }} XP</span>
                                            </div>
                                        </div>
                                        {% if challenge.is_completed %}
                                        <div class="mt-2">
                                            <span class="badge bg-success">Completed!</span>
                                        </div>
                                        {% else %}
                                        <div class="mt-2">
                                            <button class="btn btn-sm btn-outline-primary">Start Challenge</button>
                                        </div>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            {% else %}
                            <div class="col-12">
                                <p class="text-center">No spending challenges available at the moment.</p>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    
                    <!-- Earning Challenges -->
                    <div class="tab-pane fade" id="earning" role="tabpanel">
                        <div class="row">
                            {% for challenge in challenges if challenge.challenge_type.value == 'Earning' %}
                            <div class="col-md-4 mb-3">
                                <div class="card h-100 {% if challenge.is_completed %}border-success{% endif %}">
                                    <div class="card-body">
                                        <h5 class="card-title">{{ challenge.title }}</h5>
                                        <p class="card-text">{{ challenge.description }}</p>
                                        <div class="mb-2">
                                            <div class="progress">
                                                <div class="progress-bar" role="progressbar" style="width: {{ challenge.progress }}%">
                                                    {{ challenge.progress|round|int }}%
                                                </div>
                                            </div>
                                        </div>
                                        <div class="d-flex justify-content-between align-items-center">
                                            <span class="badge bg-{{ 'success' if challenge.difficulty == 'Easy' else 'warning' if challenge.difficulty == 'Medium' else 'danger' }}">
                                                {{ challenge.difficulty }}
                                            </span>
                                            <div>
                                                <span class="badge bg-warning text-dark">{{ challenge.reward_coins }} coins</span>
                                                <span class="badge bg-info">{{ challenge.reward_exp }} XP</span>
                                            </div>
                                        </div>
                                        {% if challenge.is_completed %}
                                        <div class="mt-2">
                                            <span class="badge bg-success">Completed!</span>
                                        </div>
                                        {% else %}
                                        <div class="mt-2">
                                            <button class="btn btn-sm btn-outline-primary">Start Challenge</button>
                                        </div>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            {% else %}
                            <div class="col-12">
                                <p class="text-center">No earning challenges available at the moment.</p>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    
                    <!-- Investing Challenges -->
                    <div class="tab-pane fade" id="investing" role="tabpanel">
                        <div class="row">
                            {% for challenge in challenges if challenge.challenge_type.value == 'Investing' %}
                            <div class="col-md-4 mb-3">
                                <div class="card h-100 {% if challenge.is_completed %}border-success{% endif %}">
                                    <div class="card-body">
                                        <h5 class="card-title">{{ challenge.title }}</h5>
                                        <p class="card-text">{{ challenge.description }}</p>
                                        <div class="mb-2">
                                            <div class="progress">
                                                <div class="progress-bar" role="progressbar" style="width: {{ challenge.progress }}%">
                                                    {{ challenge.progress|round|int }}%
                                                </div>
                                            </div>
                                        </div>
                                        <div class="d-flex justify-content-between align-items-center">
                                            <span class="badge bg-{{ 'success' if challenge.difficulty == 'Easy' else 'warning' if challenge.difficulty == 'Medium' else 'danger' }}">
                                                {{ challenge.difficulty }}
                                            </span>
                                            <div>
                                                <span class="badge bg-warning text-dark">{{ challenge.reward_coins }} coins</span>
                                                <span class="badge bg-info">{{ challenge.reward_exp }} XP</span>
                                            </div>
                                        </div>
                                        {% if challenge.is_completed %}
                                        <div class="mt-2">
                                            <span class="badge bg-success">Completed!</span>
                                        </div>
                                        {% else %}
                                        <div class="mt-2">
                                            <button class="btn btn-sm btn-outline-primary">Start Challenge</button>
                                        </div>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            {% else %}
                            <div class="col-12">
                                <p class="text-center">No investing challenges available at the moment.</p>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    
                    <!-- Budgeting Challenges -->
                    <div class="tab-pane fade" id="budgeting" role="tabpanel">
                        <div class="row">
                            {% for challenge in challenges if challenge.challenge_type.value == 'Budgeting' %}
                            <div class="col-md-4 mb-3">
                                <div class="card h-100 {% if challenge.is_completed %}border-success{% endif %}">
                                    <div class="card-body">
                                        <h5 class="card-title">{{ challenge.title }}</h5>
                                        <p class="card-text">{{ challenge.description }}</p>
                                        <div class="mb-2">
                                            <div class="progress">
                                                <div class="progress-bar" role="progressbar" style="width: {{ challenge.progress }}%">
                                                    {{ challenge.progress|round|int }}%
                                                </div>
                                            </div>
                                        </div>
                                        <div class="d-flex justify-content-between align-items-center">
                                            <span class="badge bg-{{ 'success' if challenge.difficulty == 'Easy' else 'warning' if challenge.difficulty == 'Medium' else 'danger' }}">
                                                {{ challenge.difficulty }}
                                            </span>
                                            <div>
                                                <span class="badge bg-warning text-dark">{{ challenge.reward_coins }} coins</span>
                                                <span class="badge bg-info">{{ challenge.reward_exp }} XP</span>
                                            </div>
                                        </div>
                                        {% if challenge.is_completed %}
                                        <div class="mt-2">
                                            <span class="badge bg-success">Completed!</span>
                                        </div>
                                        {% else %}
                                        <div class="mt-2">
                                            <button class="btn btn-sm btn-outline-primary">Start Challenge</button>
                                        </div>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            {% else %}
                            <div class="col-12">
                                <p class="text-center">No budgeting challenges available at the moment.</p>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %} 